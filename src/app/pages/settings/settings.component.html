<ng-template #settingsMenu>
  <ng-container *transloco="let t; read: 'settings'">
    <ion-toolbar *ngIf="!contentPage">
      <ion-buttons slot="primary">
        <ion-button (click)="dismiss()" [attr.aria-label]="t('close')">
          <ion-icon slot="icon-only" name="close"></ion-icon>
        </ion-button>
      </ion-buttons>
      <ion-title>{{ t('title') }}</ion-title>
    </ion-toolbar>

    <ion-list *ngFor="let group of groups">
      <ion-list-header>
        <ion-label>{{ t(group.name + '.title') }}</ion-label>
      </ion-list-header>
      <ion-item *ngFor="let page of group.pages" (click)="open(group, page)" [button]="true">
        <ion-icon slot="start" [name]="page.icon" color="dark" />
        <ion-label>{{ t(group.name + '.' + page.path + '.title') }}</ion-label>
      </ion-item>
    </ion-list>
  </ng-container>
</ng-template>

<mat-drawer-container autosize>
  <mat-drawer mode="side" opened *ngIf="contentPage && (isLargePage$ | async)">
    <ng-container *ngTemplateOutlet="settingsMenu"></ng-container>
  </mat-drawer>

  <mat-drawer-content>
    <ng-container *ngIf="!contentPage">
      <ng-container *ngTemplateOutlet="settingsMenu"></ng-container>
    </ng-container>
    <ng-container *ngIf="contentPage">
      <ng-container *transloco="let t; read: 'settings'">
        <ion-toolbar>
          <ion-buttons slot="secondary">
            <ion-button *ngIf="(isLargePage$ | async) === false" (click)="closeContentPage()">
              <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
            </ion-button>
          </ion-buttons>
          <ion-title>{{ t(contentPage + '.title') }}</ion-title>
        </ion-toolbar>

        <div id="content-page">
          <router-outlet name="settings"></router-outlet>
        </div>
      </ng-container>
    </ng-container>
  </mat-drawer-content>
</mat-drawer-container>
